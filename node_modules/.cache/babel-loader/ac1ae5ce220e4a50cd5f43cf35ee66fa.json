{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\music_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\music_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:\\\\music_app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useState,useRef,useEffect}from'react';import*as FaIcons from\"react-icons/fa\";import{BiSkipPrevious,BiSkipNext}from\"react-icons/bi\";import{IoPlaySkipBack,IoPlaySkipForward}from\"react-icons/io5\";import{IconContext}from'react-icons';function Songplayers(_ref){var currentsong=_ref.currentsong,setsongs=_ref.setsongs,setcurrentsong=_ref.setcurrentsong,isplaying=_ref.isplaying,setisplaying=_ref.setisplaying,audioRef=_ref.audioRef,songinfo=_ref.songinfo,setsonginfo=_ref.setsonginfo,songs=_ref.songs;useEffect(function(){var Newgana=songs.map(function(song){if(song.id===currentsong.id){return _objectSpread(_objectSpread({},song),{},{Active:true});}else{return _objectSpread(_objectSpread({},song),{},{Active:false});}});setsongs(Newgana);},[currentsong]);var timehandler=function timehandler(e){var current=e.target.currentTime;var duration=e.target.duration;var roundcurrent=Math.round(current);var roundduration=Math.round(duration);var animation=Math.round(roundcurrent/roundduration*100);setsonginfo(_objectSpread(_objectSpread({},songinfo),{},{currentTime:current,duration:duration,animationper:animation}));};var clickhandler=function clickhandler(){if(isplaying){audioRef.current.pause();setisplaying(!isplaying);}else{audioRef.current.play();setisplaying(!isplaying);}};var Mathcorrect=function Mathcorrect(e){return Math.floor(e/60)+':'+('0'+Math.floor(e%60)).slice(-2);};var changehandle=function changehandle(e){audioRef.current.currentTime=e.target.value;setsonginfo(_objectSpread(_objectSpread({},songinfo),{},{currentTime:e.target.value}));};var skip_handle=function skip_handle(direction){var currentIndex=songs.findIndex(function(song){return song.id===currentsong.id;});if(direction==\"S_forward\"){setcurrentsong(songs[(currentIndex+1)%songs.length]);}else if(direction==\"S_backward\"){if(currentIndex-1==-1){setcurrentsong(songs[songs.length-1]);/*....................add.............................*/if(isplaying){var promise=audioRef.current.play();if(promise!==undefined)promise.then(function(audio){audioRef.current.play();});}//.................remove.................................//\nreturn;}setcurrentsong(songs[(currentIndex-1)%songs.length]);}if(isplaying){var _promise=audioRef.current.play();if(_promise!==undefined)_promise.then(function(audio){audioRef.current.play();});}};var trackAni={transform:\"translateX(\".concat(songinfo.animationper,\"%)\")};var anmat={background:\"linear-gradient(to right, \".concat(currentsong.Color[0],\", \").concat(currentsong.Color[1],\")\")};var ender=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentsong.id;});_context.next=3;return setcurrentsong(songs[(currentIndex+1)%songs.length]);case 3:if(isplaying)audioRef.current.play();case 4:case\"end\":return _context.stop();}}},_callee);}));return function ender(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IconContext.Provider,{value:{color:\"white\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"player\"},/*#__PURE__*/React.createElement(\"div\",{className:\"time_control\"},/*#__PURE__*/React.createElement(\"p\",null,Mathcorrect(songinfo.currentTime)),/*#__PURE__*/React.createElement(\"div\",{className:\"track\",style:anmat},/*#__PURE__*/React.createElement(\"input\",{type:\"range\",min:0,max:songinfo.duration||0,value:songinfo.currentTime,onChange:changehandle}),/*#__PURE__*/React.createElement(\"div\",{className:\"animation_track\",style:trackAni})),/*#__PURE__*/React.createElement(\"p\",null,songinfo.duration?Mathcorrect(songinfo.duration):\"0:00\",\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"play_control\"},/*#__PURE__*/React.createElement(IoPlaySkipBack,{className:\"icons\",onClick:function onClick(){return skip_handle('S_backward');}}),isplaying&&/*#__PURE__*/React.createElement(FaIcons.FaPause,{className:\"icons\",onClick:clickhandler}),!isplaying&&/*#__PURE__*/React.createElement(FaIcons.FaPlay,{className:\"icons\",onClick:clickhandler}),/*#__PURE__*/React.createElement(IoPlaySkipForward,{className:\"icons\",onClick:function onClick(){return skip_handle('S_forward');}}),/*#__PURE__*/React.createElement(\"audio\",{onLoadedMetadata:timehandler,onTimeUpdate:timehandler,ref:audioRef,src:currentsong.Audio,onEnded:ender}))));}export default Songplayers;","map":{"version":3,"sources":["D:/music_app/src/Songplayers.js"],"names":["React","useState","useRef","useEffect","FaIcons","BiSkipPrevious","BiSkipNext","IoPlaySkipBack","IoPlaySkipForward","IconContext","Songplayers","currentsong","setsongs","setcurrentsong","isplaying","setisplaying","audioRef","songinfo","setsonginfo","songs","Newgana","map","song","id","Active","timehandler","e","current","target","currentTime","duration","roundcurrent","Math","round","roundduration","animation","animationper","clickhandler","pause","play","Mathcorrect","floor","slice","changehandle","value","skip_handle","direction","currentIndex","findIndex","length","promise","undefined","then","audio","trackAni","transform","anmat","background","Color","ender","color","Audio"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect} from 'react';\r\nimport * as FaIcons from \"react-icons/fa\";\r\nimport {BiSkipPrevious, BiSkipNext } from \"react-icons/bi\";\r\nimport { IoPlaySkipBack, IoPlaySkipForward } from \"react-icons/io5\";\r\nimport {IconContext} from 'react-icons'\r\n\r\nfunction Songplayers({currentsong, setsongs, setcurrentsong, isplaying, setisplaying ,audioRef,  songinfo, setsonginfo, songs}){\r\nuseEffect(() => {\r\n\tconst Newgana = songs.map((song)=>{\r\n\t\tif (song.id === currentsong.id){\r\n\t\t\treturn{\r\n\t\t\t\t...song,\r\n\t\t\t\tActive:true,\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...song,\r\n\t\t\t\t\tActive:false,\r\n\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t);\r\n\t\tsetsongs(Newgana);\r\n\r\n}, [currentsong])\r\n\t\r\n\tconst timehandler =(e)=>{\r\n\tconst current= e.target.currentTime;\r\n\t const duration =e.target.duration;\r\n\t const roundcurrent = Math.round(current);\r\n\t const roundduration = Math.round(duration);\r\n\t const animation =Math.round((roundcurrent/roundduration)*100)\r\n\tsetsonginfo({...songinfo, currentTime:current , duration, animationper:animation})\r\n\t}\r\n\t\r\n\tconst clickhandler =()=>{\r\n\t\t\r\n\t\r\n\t\tif(isplaying){\r\n\t\t\taudioRef.current.pause();\r\n\t\t\tsetisplaying(!isplaying)\r\n\t\t}else{\r\n\t\t\taudioRef.current.play();\r\n\t\t\tsetisplaying(!isplaying)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\r\n\t}\r\n\tconst Mathcorrect =(e)=>{\r\n\t\treturn(\r\n\t\t(Math.floor(e/60)) + ':' + ('0' + Math.floor(e%60)).slice(-2)\r\n\t\t)\r\n\t\t\r\n\t}\r\n\tconst changehandle =(e) =>{\r\n\t\taudioRef.current.currentTime= e.target.value;\r\n\t\tsetsonginfo({...songinfo, currentTime:e.target.value})\r\n\t\t\r\n\t\t\r\n\t}\r\n\tconst skip_handle = (direction)=>{\r\n\r\n\t\tconst currentIndex = songs.findIndex((song) => song.id === currentsong.id)\r\n\t\tif(direction == \"S_forward\"){\r\n\t\t\tsetcurrentsong(songs[(currentIndex +1) % songs.length] );\r\n\t\t} else if(direction == \"S_backward\"){\r\n\t\t\t\tif((currentIndex-1) == -1){\r\n\t\t\t\t\tsetcurrentsong(songs[songs.length -1])\r\n\t\t/*....................add.............................*/\r\n\t\tif(isplaying){\r\n\t\t\tconst promise = audioRef.current.play();\r\n\t\t\tif(promise !== undefined)\r\n\t\t\tpromise.then((audio)=>{\r\n\t\t\t\taudioRef.current.play();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t)\r\n\t\t}\r\n\t\t //.................remove.................................//\r\n\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetcurrentsong(songs[(currentIndex -1) % songs.length] );\t\t\r\n\r\n\t\t}\r\n\t\tif(isplaying){\r\n\t\t\r\n\t\t\tconst promise = audioRef.current.play();\r\n\t\t\tif(promise !== undefined)\r\n\t\t\tpromise.then((audio)=>{\r\n\t\t\t\taudioRef.current.play();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n}\r\nconst trackAni ={\r\n\ttransform: `translateX(${songinfo.animationper}%)`\r\n}\r\nconst anmat={\r\nbackground: `linear-gradient(to right, ${currentsong.Color[0]}, ${currentsong.Color[1]})`\r\n}\r\nconst ender = async() =>{\r\n\r\n\tconst currentIndex = songs.findIndex((song) => song.id === currentsong.id)\r\n\t\t\r\n\t\t\tawait setcurrentsong(songs[(currentIndex +1) % songs.length] );\r\n\tif(isplaying) audioRef.current.play();\r\n\t\r\n\r\n\r\n\r\n}\r\n\r\n\treturn(\r\n\t\t<IconContext.Provider value={{color: \"white\"}}>\r\n\t<div className='player'>\r\n\t<div className=\"time_control\">\r\n\t\r\n\t<p>{Mathcorrect(songinfo.currentTime)}</p>\r\n\t<div className=\"track\" style={anmat}>\r\n\t<input type=\"range\" min={0} max={songinfo.duration || 0} value={songinfo.currentTime} onChange={changehandle}></input>\r\n\t<div className=\"animation_track\" style={trackAni} ></div>\r\n\t</div>\r\n\t<p>{songinfo.duration ? Mathcorrect(songinfo.duration) : \"0:00\"} </p>\r\n\t\r\n\t</div>\r\n\t<div className=\"play_control\">\r\n\t<IoPlaySkipBack className=\"icons\" onClick={()=> skip_handle('S_backward')}/>\r\n\t\r\n\t\r\n\t{\r\n\t\tisplaying && (\r\n<FaIcons.FaPause className=\"icons\" onClick={clickhandler} />\r\n\t\t)\r\n\r\n}{ !isplaying && (\r\n\t\t<FaIcons.FaPlay className=\"icons\" onClick={clickhandler} />\r\n)\r\n}\r\n\r\n\t<IoPlaySkipForward  className=\"icons\" onClick={()=> skip_handle('S_forward')}/>\r\n\t<audio onLoadedMetadata={timehandler} onTimeUpdate={timehandler} ref={audioRef} src={currentsong.Audio} onEnded={ender}></audio>\r\n\r\n\t</div>\r\n\r\n\t</div>\r\n\t\r\n\t</IconContext.Provider>\r\n\t)\r\n\t\r\n}\r\n\r\n\r\nexport default Songplayers\r\n"]},"metadata":{},"sourceType":"module"}